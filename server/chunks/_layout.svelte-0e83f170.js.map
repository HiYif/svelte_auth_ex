{"version":3,"file":"_layout.svelte-0e83f170.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_layout.svelte.js"],"sourcesContent":["import { c as create_ssr_component, a as subscribe, b as set_store_value, d as add_attribute, e as escape } from \"../../chunks/index3.js\";\nimport { l as loginSession, t as toast } from \"../../chunks/stores.js\";\nfunction client_method(key) {\n  {\n    if (key === \"before_navigate\" || key === \"after_navigate\") {\n      return () => {\n      };\n    } else {\n      const name_lookup = {\n        disable_scroll_handling: \"disableScrollHandling\",\n        preload_data: \"preloadData\",\n        preload_code: \"preloadCode\",\n        invalidate_all: \"invalidateAll\"\n      };\n      return () => {\n        throw new Error(`Cannot call ${name_lookup[key] ?? key}(...) on the server`);\n      };\n    }\n  }\n}\nconst beforeNavigate = /* @__PURE__ */ client_method(\"before_navigate\");\nconst bootstrap = \"\";\nconst _layout_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \".svelte-16lhf5b{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.toast.svelte-16lhf5b{z-index:9999}.avatar.svelte-16lhf5b{position:relative;top:-1.5px}\",\n  map: null\n};\nconst Layout = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $toast, $$unsubscribe_toast;\n  let $loginSession, $$unsubscribe_loginSession;\n  $$unsubscribe_toast = subscribe(toast, (value) => $toast = value);\n  $$unsubscribe_loginSession = subscribe(loginSession, (value) => $loginSession = value);\n  let { data } = $$props;\n  const prerender = true;\n  const { user } = data;\n  set_store_value(loginSession, $loginSession = user, $loginSession);\n  let Toast;\n  beforeNavigate(() => {\n    let expirationDate = $loginSession?.expires ? new Date($loginSession.expires) : void 0;\n    if (expirationDate && expirationDate < /* @__PURE__ */ new Date()) {\n      console.log(\"Login session expired.\");\n      set_store_value(loginSession, $loginSession = null, $loginSession);\n    }\n  });\n  const openToast = (open) => {\n    if (open) {\n      const toastDiv = document.getElementById(\"authToast\");\n      const t = new Toast(toastDiv);\n      t.show();\n    }\n  };\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  if ($$props.prerender === void 0 && $$bindings.prerender && prerender !== void 0)\n    $$bindings.prerender(prerender);\n  $$result.css.add(css);\n  {\n    openToast($toast.isOpen);\n  }\n  $$unsubscribe_toast();\n  $$unsubscribe_loginSession();\n  return `<nav class=\"navbar navbar-expand-lg navbar-light bg-light svelte-16lhf5b\"><div class=\"container svelte-16lhf5b\"><a class=\"navbar-brand svelte-16lhf5b\" href=\"/\">SvelteKit-Auth-Example</a>\n    <button class=\"navbar-toggler svelte-16lhf5b\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarMain\" aria-controls=\"navbarMain\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span class=\"navbar-toggler-icon svelte-16lhf5b\"></span></button>\n    <div class=\"collapse navbar-collapse svelte-16lhf5b\" id=\"navbarMain\"><ul class=\"navbar-nav me-5 svelte-16lhf5b\"><li class=\"nav-item svelte-16lhf5b\"><a class=\"nav-link active svelte-16lhf5b\" aria-current=\"page\" href=\"/\">Home</a></li>\n        <li class=\"nav-item svelte-16lhf5b\"><a class=\"nav-link svelte-16lhf5b\" href=\"/info\">Info</a></li>\n\n        ${$loginSession ? `${$loginSession.role == \"admin\" ? `<li class=\"nav-item svelte-16lhf5b\"><a class=\"nav-link svelte-16lhf5b\" href=\"/admin\">Admin</a></li>` : ``}\n          ${$loginSession.role != \"student\" ? `<li class=\"nav-item svelte-16lhf5b\"><a class=\"nav-link svelte-16lhf5b\" href=\"/teachers\">Teachers</a></li>` : ``}` : ``}</ul>\n      <ul class=\"navbar-nav svelte-16lhf5b\">${$loginSession ? `<li class=\"nav-item dropdown svelte-16lhf5b\"><a class=\"nav-link dropdown-toggle svelte-16lhf5b\"${add_attribute(\"href\", \"#\", 0)} role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"avatar svelte-16lhf5b\" viewBox=\"0 0 16 16\"><path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" class=\"svelte-16lhf5b\"></path><path fill-rule=\"evenodd\" d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\" class=\"svelte-16lhf5b\"></path></svg>\n              ${escape($loginSession.firstName)}</a>\n            <ul class=\"dropdown-menu svelte-16lhf5b\"><li class=\"svelte-16lhf5b\"><a class=\"dropdown-item svelte-16lhf5b\" href=\"/profile\">Profile</a></li>\n              <li class=\"svelte-16lhf5b\"><a class=\"${[\n    \"dropdown-item svelte-16lhf5b\",\n    !$loginSession || $loginSession.id === 0 ? \"d-none\" : \"\"\n  ].join(\" \").trim()}\"${add_attribute(\"href\", \"#\", 0)}>Logout</a></li></ul></li>` : `<li class=\"nav-item svelte-16lhf5b\"><a class=\"nav-link svelte-16lhf5b\" href=\"/login\">Login</a></li>`}</ul></div></div></nav>\n\n<main class=\"container svelte-16lhf5b\">${slots.default ? slots.default({}) : ``}\n\n  <div id=\"authToast\" class=\"toast position-fixed top-0 end-0 m-3 svelte-16lhf5b\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\"><div class=\"toast-header bg-primary text-white svelte-16lhf5b\"><strong class=\"me-auto svelte-16lhf5b\">${escape($toast.title)}</strong>\n      <button type=\"button\" class=\"btn-close svelte-16lhf5b\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button></div>\n    <div class=\"toast-body svelte-16lhf5b\">${escape($toast.body)}</div></div>\n\n</main>`;\n});\nexport {\n  Layout as default\n};\n"],"names":[],"mappings":"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"}