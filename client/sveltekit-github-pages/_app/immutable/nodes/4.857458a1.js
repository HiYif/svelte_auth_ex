import{S as ke,i as Ie,s as Ve,a as P,k as n,q as k,P as De,h as o,c as E,l as i,m as f,r as I,n as t,b as se,D as e,Q as ve,N as we,O as qe,J as be,R as Ne,H as Oe,o as Se,T as Te,u as je,I as Le,w as ge}from"../chunks/index.0a471256.js";import{g as Be}from"../chunks/navigation.f06aafd0.js";import{t as Pe}from"../chunks/stores.68a1c5e6.js";import{f as Ce}from"../chunks/focus.a98a273e.js";const Fe=async l=>({token:l.params.token}),ze=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));const{document:Ee}=Te;function ye(l){let m,r;return{c(){m=n("p"),r=k(l[3]),this.h()},l(d){m=i(d,"P",{class:!0});var u=f(m);r=I(u,l[3]),u.forEach(o),this.h()},h(){t(m,"class","text-danger")},m(d,u){se(d,m,u),e(m,r)},p(d,u){u&8&&je(r,d[3])},d(d){d&&o(m)}}}function Me(l){let m,r,d,u,s,v,g,D,M,q,R,U,_,a,A,T,c,z,j,G,Q,L,Y,K,y,N,W,X,w,H,Z,B,x,$,J,C,O,ee,te,ae,p=l[3]&&ye(l);return{c(){m=P(),r=n("div"),d=n("div"),u=n("div"),s=n("form"),v=n("h4"),g=n("strong"),D=k("New Password"),M=P(),q=n("p"),R=k("Please provide a new password."),U=P(),_=n("div"),a=n("label"),A=k("Password"),T=P(),c=n("input"),z=P(),j=n("div"),G=k("Password with 8 chars or more required"),Q=P(),L=n("div"),Y=k("Password minimum length 8, must have one capital letter, 1 number, and one unique character."),K=P(),y=n("div"),N=n("label"),W=k("Password (retype)"),X=P(),w=n("input"),Z=P(),B=n("div"),x=k("Passwords must match"),$=P(),p&&p.c(),J=P(),C=n("div"),O=n("button"),ee=k("Send Email"),this.h()},l(h){De("svelte-1j9rmbc",Ee.head).forEach(o),m=E(h),r=i(h,"DIV",{class:!0});var re=f(r);d=i(re,"DIV",{class:!0});var oe=f(d);u=i(oe,"DIV",{class:!0});var le=f(u);s=i(le,"FORM",{id:!0,autocomplete:!0});var b=f(s);v=i(b,"H4",{});var ne=f(v);g=i(ne,"STRONG",{});var ie=f(g);D=I(ie,"New Password"),ie.forEach(o),ne.forEach(o),M=E(b),q=i(b,"P",{});var de=f(q);R=I(de,"Please provide a new password."),de.forEach(o),U=E(b),_=i(b,"DIV",{class:!0});var V=f(_);a=i(V,"LABEL",{class:!0,for:!0});var ce=f(a);A=I(ce,"Password"),ce.forEach(o),T=E(V),c=i(V,"INPUT",{class:!0,id:!0,type:!0,minlength:!0,maxlength:!0,placeholder:!0,autocomplete:!0}),z=E(V),j=i(V,"DIV",{class:!0});var ue=f(j);G=I(ue,"Password with 8 chars or more required"),ue.forEach(o),Q=E(V),L=i(V,"DIV",{class:!0});var fe=f(L);Y=I(fe,"Password minimum length 8, must have one capital letter, 1 number, and one unique character."),fe.forEach(o),V.forEach(o),K=E(b),y=i(b,"DIV",{class:!0});var F=f(y);N=i(F,"LABEL",{class:!0,for:!0});var me=f(N);W=I(me,"Password (retype)"),me.forEach(o),X=E(F),w=i(F,"INPUT",{class:!0,id:!0,type:!0,minlength:!0,maxlength:!0,placeholder:!0,autocomplete:!0}),Z=E(F),B=i(F,"DIV",{class:!0});var pe=f(B);x=I(pe,"Passwords must match"),pe.forEach(o),F.forEach(o),$=E(b),p&&p.l(b),J=E(b),C=i(b,"DIV",{class:!0});var he=f(C);O=i(he,"BUTTON",{class:!0});var _e=f(O);ee=I(_e,"Send Email"),_e.forEach(o),he.forEach(o),b.forEach(o),le.forEach(o),oe.forEach(o),re.forEach(o),this.h()},h(){Ee.title="New Password",t(a,"class","form-label"),t(a,"for","password"),t(c,"class","form-control"),t(c,"id","password"),t(c,"type","password"),t(c,"minlength","8"),t(c,"maxlength","80"),t(c,"placeholder","Password"),t(c,"autocomplete","new-password"),t(j,"class","invalid-feedback"),t(L,"class","form-text"),t(_,"class","mb-3"),t(N,"class","form-label"),t(N,"for","passwordConfirm"),t(w,"class","form-control"),t(w,"id","passwordConfirm"),t(w,"type","password"),w.required=H=!!l[1],t(w,"minlength","8"),t(w,"maxlength","80"),t(w,"placeholder","Password (again)"),t(w,"autocomplete","new-password"),t(B,"class","invalid-feedback"),t(y,"class","mb-3"),t(O,"class","btn btn-primary btn-lg"),t(C,"class","d-grid gap-2"),t(s,"id","reset"),t(s,"autocomplete","on"),s.noValidate=!0,t(u,"class","card-body svelte-wmjxka"),t(d,"class","card login"),t(r,"class","d-flex justify-content-center mt-5")},m(h,S){se(h,m,S),se(h,r,S),e(r,d),e(d,u),e(u,s),e(s,v),e(v,g),e(g,D),e(s,M),e(s,q),e(q,R),e(s,U),e(s,_),e(_,a),e(a,A),e(_,T),e(_,c),ve(c,l[1]),l[7](c),e(_,z),e(_,j),e(j,G),e(_,Q),e(_,L),e(L,Y),e(s,K),e(s,y),e(y,N),e(N,W),e(y,X),e(y,w),l[8](w),e(y,Z),e(y,B),e(B,x),e(s,$),p&&p.m(s,null),e(s,J),e(s,C),e(C,O),e(O,ee),te||(ae=[we(c,"input",l[6]),we(O,"click",qe(l[4]))],te=!0)},p(h,[S]){S&2&&c.value!==h[1]&&ve(c,h[1]),S&2&&H!==(H=!!h[1])&&(w.required=H),h[3]?p?p.p(h,S):(p=ye(h),p.c(),p.m(s,J)):p&&(p.d(1),p=null)},i:be,o:be,d(h){h&&o(m),h&&o(r),l[7](null),l[8](null),p&&p.d(),te=!1,Ne(ae)}}}function Re(l,m,r){let d;Oe(l,Pe,a=>r(9,d=a));let{data:u}=m,s,v,g,D;Se(()=>{s.focus()});const M=()=>(v||r(1,v=""),v==g.value),q=async()=>{r(3,D="");const a=document.getElementById("reset");if(M()||g.classList.add("is-invalid"),a.checkValidity()){const T=await fetch("/auth/reset",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u.token,password:v})});if(T.ok)Le(Pe,d={title:"Password Reset Succesful",body:"Your password was reset. Please login.",isOpen:!0},d),Be("/login");else{const c=await T.json();console.log("Failed reset",c),r(3,D=c.message)}}else a.classList.add("was-validated"),Ce(a)};function R(){v=this.value,r(1,v)}function U(a){ge[a?"unshift":"push"](()=>{s=a,r(0,s)})}function _(a){ge[a?"unshift":"push"](()=>{g=a,r(2,g)})}return l.$$set=a=>{"data"in a&&r(5,u=a.data)},[s,v,g,D,q,u,R,U,_]}class Ge extends ke{constructor(m){super(),Ie(this,m,Re,Me,Ve,{data:5})}}export{Ge as component,ze as universal};
