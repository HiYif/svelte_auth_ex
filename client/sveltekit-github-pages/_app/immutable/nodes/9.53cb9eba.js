import{S as Ze,i as xe,s as $e,a as f,k as s,q as I,P as et,h as o,c as p,l,m as u,r as N,n as t,b as oe,D as e,J as He,o as tt,T as at,Q as A,N as re,R as rt,u as st,w as Qe}from"../chunks/index.0a471256.js";import{g as lt}from"../chunks/navigation.8f4cf801.js";import{l as ot}from"../chunks/stores.68a1c5e6.js";import{f as it}from"../chunks/focus.a98a273e.js";import{i as nt,r as ut}from"../chunks/google.591341d1.js";const{document:Ke}=at;function Xe(c){let a,i,m,r,h,E,S,U,v,O,L,_,w,g,q,C,b,n,G,j,ie,ne,X,ue,de,B,W,ce,me,V,fe,Y,pe,he,R,H,ve,_e,D,be,Z,ge,Ee,F,Q,we,ye,k,Pe,x,Ie,Ne,M,K,Le,qe,T,Ve,se,z,De,ke,Te,P=c[3]&&Ye(c);return{c(){a=s("form"),i=s("div"),m=s("div"),r=f(),h=s("div"),E=s("label"),S=I("Email"),U=f(),v=s("input"),O=f(),L=s("div"),_=I("Email address required"),w=f(),g=s("div"),q=s("label"),C=I("Password"),b=f(),n=s("input"),G=f(),j=s("div"),ie=I("Password with 8 chars or more required"),ne=f(),X=s("div"),ue=I("Password minimum length 8, must have one capital letter, 1 number, and one unique character."),de=f(),B=s("div"),W=s("label"),ce=I("Confirm password"),me=f(),V=s("input"),fe=f(),Y=s("div"),pe=I("Password minimum length 8, must have one capital letter, 1 number, and one unique character."),he=f(),R=s("div"),H=s("label"),ve=I("First name"),_e=f(),D=s("input"),be=f(),Z=s("div"),ge=I("First name required"),Ee=f(),F=s("div"),Q=s("label"),we=I("Last name"),ye=f(),k=s("input"),Pe=f(),x=s("div"),Ie=I("Last name required"),Ne=f(),M=s("div"),K=s("label"),Le=I("Phone"),qe=f(),T=s("input"),Ve=f(),P&&P.c(),se=f(),z=s("button"),De=I("Register"),this.h()},l(y){a=l(y,"FORM",{id:!0,autocomplete:!0,class:!0});var d=u(a);i=l(d,"DIV",{class:!0});var Be=u(i);m=l(Be,"DIV",{id:!0}),u(m).forEach(o),Be.forEach(o),r=p(d),h=l(d,"DIV",{class:!0});var $=u(h);E=l($,"LABEL",{class:!0,for:!0});var Re=u(E);S=N(Re,"Email"),Re.forEach(o),U=p($),v=l($,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,autocomplete:!0}),O=p($),L=l($,"DIV",{class:!0});var Fe=u(L);_=N(Fe,"Email address required"),Fe.forEach(o),$.forEach(o),w=p(d),g=l(d,"DIV",{class:!0});var J=u(g);q=l(J,"LABEL",{class:!0,for:!0});var Ae=u(q);C=N(Ae,"Password"),Ae.forEach(o),b=p(J),n=l(J,"INPUT",{type:!0,id:!0,class:!0,minlength:!0,maxlength:!0,placeholder:!0,autocomplete:!0}),G=p(J),j=l(J,"DIV",{class:!0});var Se=u(j);ie=N(Se,"Password with 8 chars or more required"),Se.forEach(o),ne=p(J),X=l(J,"DIV",{class:!0});var Ue=u(X);ue=N(Ue,"Password minimum length 8, must have one capital letter, 1 number, and one unique character."),Ue.forEach(o),J.forEach(o),de=p(d),B=l(d,"DIV",{class:!0});var ee=u(B);W=l(ee,"LABEL",{class:!0,for:!0});var Oe=u(W);ce=N(Oe,"Confirm password"),Oe.forEach(o),me=p(ee),V=l(ee,"INPUT",{type:!0,id:!0,class:!0,minlength:!0,maxlength:!0,placeholder:!0,autocomplete:!0}),fe=p(ee),Y=l(ee,"DIV",{class:!0});var je=u(Y);pe=N(je,"Password minimum length 8, must have one capital letter, 1 number, and one unique character."),je.forEach(o),ee.forEach(o),he=p(d),R=l(d,"DIV",{class:!0});var te=u(R);H=l(te,"LABEL",{class:!0,for:!0});var Ce=u(H);ve=N(Ce,"First name"),Ce.forEach(o),_e=p(te),D=l(te,"INPUT",{class:!0,id:!0,placeholder:!0,autocomplete:!0}),be=p(te),Z=l(te,"DIV",{class:!0});var Ge=u(Z);ge=N(Ge,"First name required"),Ge.forEach(o),te.forEach(o),Ee=p(d),F=l(d,"DIV",{class:!0});var ae=u(F);Q=l(ae,"LABEL",{class:!0,for:!0});var Me=u(Q);we=N(Me,"Last name"),Me.forEach(o),ye=p(ae),k=l(ae,"INPUT",{class:!0,id:!0,placeholder:!0,autocomplete:!0}),Pe=p(ae),x=l(ae,"DIV",{class:!0});var ze=u(x);Ie=N(ze,"Last name required"),ze.forEach(o),ae.forEach(o),Ne=p(d),M=l(d,"DIV",{class:!0});var le=u(M);K=l(le,"LABEL",{class:!0,for:!0});var Je=u(K);Le=N(Je,"Phone"),Je.forEach(o),qe=p(le),T=l(le,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0,autocomplete:!0}),le.forEach(o),Ve=p(d),P&&P.l(d),se=p(d),z=l(d,"BUTTON",{type:!0,class:!0});var We=u(z);De=N(We,"Register"),We.forEach(o),d.forEach(o),this.h()},h(){t(m,"id","googleButton"),t(i,"class","mb-3"),t(E,"class","form-label"),t(E,"for","email"),t(v,"type","email"),t(v,"class","form-control"),v.required=!0,t(v,"placeholder","Email"),t(v,"id","email"),t(v,"autocomplete","email"),t(L,"class","invalid-feedback"),t(h,"class","mb-3"),t(q,"class","form-label"),t(q,"for","password"),t(n,"type","password"),t(n,"id","password"),t(n,"class","form-control"),n.required=!0,t(n,"minlength","8"),t(n,"maxlength","80"),t(n,"placeholder","Password"),t(n,"autocomplete","new-password"),t(j,"class","invalid-feedback"),t(X,"class","form-text"),t(g,"class","mb-3"),t(W,"class","form-label"),t(W,"for","password"),t(V,"type","password"),t(V,"id","password"),t(V,"class","form-control"),V.required=!0,t(V,"minlength","8"),t(V,"maxlength","80"),t(V,"placeholder","Password (again)"),t(V,"autocomplete","new-password"),t(Y,"class","form-text"),t(B,"class","mb-3"),t(H,"class","form-label"),t(H,"for","firstName"),t(D,"class","form-control"),t(D,"id","firstName"),t(D,"placeholder","First name"),D.required=!0,t(D,"autocomplete","given-name"),t(Z,"class","invalid-feedback"),t(R,"class","mb-3"),t(Q,"class","form-label"),t(Q,"for","lastName"),t(k,"class","form-control"),t(k,"id","lastName"),t(k,"placeholder","Last name"),k.required=!0,t(k,"autocomplete","family-name"),t(x,"class","invalid-feedback"),t(F,"class","mb-3"),t(K,"class","form-label"),t(K,"for","phone"),t(T,"type","tel"),t(T,"id","phone"),t(T,"class","form-control"),t(T,"placeholder","Phone"),t(T,"autocomplete","tel-local"),t(M,"class","mb-3"),t(z,"type","button"),t(z,"class","btn btn-primary btn-lg"),t(a,"id","register"),t(a,"autocomplete","on"),a.noValidate=!0,t(a,"class","mt-3")},m(y,d){oe(y,a,d),e(a,i),e(i,m),e(a,r),e(a,h),e(h,E),e(E,S),e(h,U),e(h,v),c[5](v),A(v,c[1].email),e(h,O),e(h,L),e(L,_),e(a,w),e(a,g),e(g,q),e(q,C),e(g,b),e(g,n),A(n,c[1].password),e(g,G),e(g,j),e(j,ie),e(g,ne),e(g,X),e(X,ue),e(a,de),e(a,B),e(B,W),e(W,ce),e(B,me),e(B,V),c[8](V),e(B,fe),e(B,Y),e(Y,pe),e(a,he),e(a,R),e(R,H),e(H,ve),e(R,_e),e(R,D),A(D,c[1].firstName),e(R,be),e(R,Z),e(Z,ge),e(a,Ee),e(a,F),e(F,Q),e(Q,we),e(F,ye),e(F,k),A(k,c[1].lastName),e(F,Pe),e(F,x),e(x,Ie),e(a,Ne),e(a,M),e(M,K),e(K,Le),e(M,qe),e(M,T),A(T,c[1].phone),e(a,Ve),P&&P.m(a,null),e(a,se),e(a,z),e(z,De),ke||(Te=[re(v,"input",c[6]),re(n,"input",c[7]),re(D,"input",c[9]),re(k,"input",c[10]),re(T,"input",c[11]),re(z,"click",c[4])],ke=!0)},p(y,d){d&2&&v.value!==y[1].email&&A(v,y[1].email),d&2&&n.value!==y[1].password&&A(n,y[1].password),d&2&&D.value!==y[1].firstName&&A(D,y[1].firstName),d&2&&k.value!==y[1].lastName&&A(k,y[1].lastName),d&2&&A(T,y[1].phone),y[3]?P?P.p(y,d):(P=Ye(y),P.c(),P.m(a,se)):P&&(P.d(1),P=null)},d(y){y&&o(a),c[5](null),c[8](null),P&&P.d(),ke=!1,rt(Te)}}}function Ye(c){let a,i;return{c(){a=s("p"),i=I(c[3]),this.h()},l(m){a=l(m,"P",{class:!0});var r=u(a);i=N(r,c[3]),r.forEach(o),this.h()},h(){t(a,"class","text-danger")},m(m,r){oe(m,a,r),e(a,i)},p(m,r){r&8&&st(i,m[3])},d(m){m&&o(a)}}}function dt(c){let a,i,m,r,h,E,S,U,v,O,L,_=c[1]&&Xe(c);return{c(){a=f(),i=s("div"),m=s("div"),r=s("div"),h=s("h4"),E=s("strong"),S=I("Register"),U=f(),v=s("p"),O=I("Welcome to our community."),L=f(),_&&_.c(),this.h()},l(w){et("svelte-1vzs0v6",Ke.head).forEach(o),a=p(w),i=l(w,"DIV",{class:!0});var q=u(i);m=l(q,"DIV",{class:!0});var C=u(m);r=l(C,"DIV",{class:!0});var b=u(r);h=l(b,"H4",{});var n=u(h);E=l(n,"STRONG",{});var G=u(E);S=N(G,"Register"),G.forEach(o),n.forEach(o),U=p(b),v=l(b,"P",{});var j=u(v);O=N(j,"Welcome to our community."),j.forEach(o),L=p(b),_&&_.l(b),b.forEach(o),C.forEach(o),q.forEach(o),this.h()},h(){Ke.title="Register",t(r,"class","card-body svelte-wmjxka"),t(m,"class","card login"),t(i,"class","d-flex justify-content-center my-3")},m(w,g){oe(w,a,g),oe(w,i,g),e(i,m),e(m,r),e(r,h),e(h,E),e(E,S),e(r,U),e(r,v),e(v,O),e(r,L),_&&_.m(r,null)},p(w,[g]){w[1]?_?_.p(w,g):(_=Xe(w),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i:He,o:He,d(w){w&&o(a),w&&o(i),_&&_.d()}}}function ct(c,a,i){let m,r={id:0,role:"student",firstName:"",lastName:"",password:"",email:"",phone:""},h,E;async function S(){const b=document.getElementById("register");if(i(3,E=""),!v()){h.classList.add("is-invalid");return}if(b.checkValidity())try{await U(r)}catch(n){n instanceof Error&&(i(3,E=n.message),console.log("Login error",E))}else b.classList.add("was-validated"),it(b)}tt(()=>{nt(),ut(),m.focus()});async function U(b){try{const n=await fetch("/auth/register",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}});if(!n.ok)throw n.status==401?new Error("Sorry, that username is already in use."):new Error(n.statusText);const G=await n.json();ot.set(G.user),lt("/")}catch(n){if(console.error("Register error",n),n instanceof Error)throw new Error(n.message)}}const v=()=>r?(r.password||i(1,r.password="",r),r.password==h.value):!1;function O(b){Qe[b?"unshift":"push"](()=>{m=b,i(0,m)})}function L(){r.email=this.value,i(1,r)}function _(){r.password=this.value,i(1,r)}function w(b){Qe[b?"unshift":"push"](()=>{h=b,i(2,h)})}function g(){r.firstName=this.value,i(1,r)}function q(){r.lastName=this.value,i(1,r)}function C(){r.phone=this.value,i(1,r)}return[m,r,h,E,S,O,L,_,w,g,q,C]}class _t extends Ze{constructor(a){super(),xe(this,a,ct,dt,$e,{})}}export{_t as component};
