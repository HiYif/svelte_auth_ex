import{p as g}from"./stores.a87d2009.js";import{g as o}from"./navigation.f06aafd0.js";import{g as a,l as d}from"./stores.68a1c5e6.js";const f="930763273630-a5cvnej7vg5h9m1ra64r2r1bdfo2no2b.apps.googleusercontent.com";function y(){const e=document.getElementById("googleButton");e&&google.accounts.id.renderButton(e,{type:"standard",theme:"filled_blue",size:"large",width:"367"})}function z(){let e=!1;const c=a.subscribe(t=>{e=t});e||(google.accounts.id.initialize({client_id:f,callback:l}),a.set(!0)),c();async function l(t){const i=await fetch("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t.credential})});if(i.ok){const r=await i.json();d.set(r.user);const{role:s}=r.user;let n;if(g.subscribe(u=>{n=u.url.searchParams.get("referrer")})(),n)return o(n);if(s==="teacher")return o("/teachers");if(s==="admin")return o("/admin");location.pathname==="/login"&&o("/")}}}export{z as i,y as r};
